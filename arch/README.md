# Simple Computer Library (`mySimpleComputer`) Михайлов Руслан и Кормилицын Илья ИП-311

## Описание

Библиотека `mySimpleComputer` моделирует работу простой вычислительной машины с основными компонентами, такими как оперативная память, аккумулятор, счетчик команд, регистр флагов, а также функции для кодирования и декодирования команд. Библиотека также поддерживает сохранение и загрузку состояния памяти в файл.

Библиотека включает в себя следующие компоненты:

- **Оперативная память (RAM)**: массив из 128 элементов для хранения данных.
- **Регистры**:
  - **Аккумулятор**: хранит промежуточные вычисления.
  - **Счетчик команд**: хранит текущий адрес выполняемой команды.
  - **Регистр флагов**: хранит флаги состояния (например, флаг переполнения, флаг нуля и т. д.).
- **Функции кодирования/декодирования команд**: для преобразования команд в соответствии с форматом Simple Computer.
- **Устройства ввода-вывода**: вывод информации на экран.

Также предусмотрены функции для работы с памятью: загрузка и сохранение состояния памяти в бинарный файл.

## Структура проекта

Проект включает в себя следующие файлы:

- `mySimpleComputer.c` — исходный код библиотеки.
- `mySimpleComputer.h` — заголовочный файл с описанием API библиотеки.
- `pr01.c` — тестовая программа, использующая библиотеку.
- `Makefile` — система сборки проекта.

## Функции библиотеки

### Оперативная память

- `int sc_memoryInit(void)` — инициализирует оперативную память, задавая всем ячейкам значения 0.
- `int sc_memorySet(int address, int value)` — устанавливает значение в указанную ячейку памяти.
- `int sc_memoryGet(int address, int *value)` — возвращает значение из указанной ячейки памяти.
- `int sc_memorySave(const char *filename)` — сохраняет содержимое памяти в бинарный файл.
- `int sc_memoryLoad(const char *filename)` — загружает содержимое памяти из бинарного файла.

### Регистры

- `int sc_regInit(void)` — инициализирует регистр флагов.
- `int sc_regSet(int register, int value)` — устанавливает значение в регистр флагов.
- `int sc_regGet(int register, int *value)` — возвращает значение указанного флага.
- `int sc_accumulatorInit(void)` — инициализирует аккумулятор.
- `int sc_accumulatorSet(int value)` — устанавливает значение аккумулятора.
- `int sc_accumulatorGet(int *value)` — возвращает значение аккумулятора.
- `int sc_icounterInit(void)` — инициализирует счетчик команд.
- `int sc_icounterSet(int value)` — устанавливает значение счетчика команд.
- `int sc_icounterGet(int *value)` — возвращает значение счетчика команд.

### Кодирование и декодирование команд

- `int sc_commandEncode(int sign, int command, int operand, int *value)` — кодирует команду в соответствии с форматом Simple Computer.
- `int sc_commandDecode(int value, int *sign, int *command, int *operand)` — декодирует команду из значения.
- `int sc_commandValidate(int command)` — проверяет корректность команды.

### Устройства ввода-вывода

- `void printCell(int address)` — выводит содержимое ячейки памяти.
- `void printFlags(void)` — выводит значения флагов.
- `void printDecodedCommand(int value)` — выводит декодированное значение команды в разных системах счисления.
- `void printAccumulator(void)` — выводит значение аккумулятора.
- `void printCounters(void)` — выводит значение счетчика команд.

### Тестирование

Тестовая программа (`pr01.c`) демонстрирует использование библиотеки и выполняет следующие шаги:

1. Инициализация оперативной памяти, аккумулятора, счетчика команд и регистра флагов.
2. Установка значений для произвольных ячеек памяти и вывод их содержимого.
3. Попытка установки недопустимого значения для ячейки памяти.
4. Установка значений флагов и вывод регистра флагов.
5. Установка и вывод значения аккумулятора и счетчика команд.
6. Кодирование и декодирование команд.

## Система сборки

Проект использует Makefile для автоматической сборки.

### Команды Make

- `make` — собирает проект.
- `make clean` — очищает проект от временных файлов.
- `make pr01` — собирает исполняемый файл тестовой программы `pr01`.

## Установка и использование

1. Клонируйте репозиторий или скачайте файлы.
2. Перейдите в директорию проекта и выполните команду `make` для сборки библиотеки и тестовой программы.
3. Для запуска тестовой программы выполните `./pr01`.
